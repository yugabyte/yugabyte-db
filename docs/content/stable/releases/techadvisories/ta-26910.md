---
title: TA-26910
headerTitle: Incorrectly configured ulimit along with snapshot operations can cause data loss
description: An incorrectly configured ulimit can cause YB-TServer to crash during the final phase of a Snapshot operation, resulting in data loss on that node.
headcontent: 27 February 2026
type: docs
showRightNav: true
cascade:
  unversioned: true
menu:
  stable_releases:
    identifier: ta-26910
    weight: 1
rightNav:
  hideH2: true
---

|          Product           |  Affected Versions  |  Related Issues   | Fixed In |
| :------------------------- | :------------------ | :---------------- | :------- |
| {{<product "ybdb">}}       | {{<release "2.20">}}, {{<release "2024.1">}}, {{<release "2024.2">}} | {{<issue 26910>}}, | {{<release "2.20.11.0">}}, {{<release "2024.1.7.0">}}, {{<release "2024.2.4.0">}} |

## Description

In YugabyteDB, a snapshot is a consistent state of data taken across all nodes in a cluster at a point in time. The final phase of a snapshot operation involves a few disk writes. If a ulimit is incorrectly configured, the YB-TServer may crash during these writes, which can result in loss of data on that node.

## Mitigation

To mitigate the issue, perform _one_ of the following:

- Ensure ulimits are correctly configured. For more details, see [Set ulimits](../../../deploy/manual-deployment/system-config/#set-ulimits).
- Upgrade to a version that includes the fix: {{<release "2.20.11.0">}}, {{<release "2024.1.7.0">}}, or {{<release "2024.2.4.0">}}.

Note that until the correct ulimit configuration is set, snapshot operations remain at risk. Snapshots are taken during backups and when Point-in-Time Recovery (PITR) snapshot schedules are enabled. Specifically, setting up xCluster triggers a backup, and xCluster DR enables PITR snapshot schedules on both clusters.

## Details

During operations such as backups or PITR schedules, YugabyteDB performs a snapshot on all tablets.

As part of applying `SNAPSHOT_OP`, YugabyteDB updates the flushed frontier in the RocksDB manifest file via `Tablet::ModifyFlushedFrontie`. During this process, while previous write operations have been applied to the RocksDB instance, they might not have been flushed to the SST file yet. If ulimits are incorrectly set, the SST flush can fail, resulting in the crash of the YB-TServer process. Upon restart, the process reads the manifest data and incorrectly assumes the flush has already completed successfully, instead of retrying the operation. This can result in loss of data on that node.

In the fixed versions, YugabyteDB performs a synchronous flush of RocksDB before calling `Tablet::ModifyFlushedFrontie` is called to update the flushed frontier in the manifest file.
