## Highlights- YBA

- Single-table restores in YCQL are now possible, including backups from the entire database. Previously, such restores required table-by-table backups.
Benefits: Higher efficient backups, flexible fine-grain restores, and simplified user experience.

- [YugabyteDB Anywhere Terraform provider](https://registry.terraform.io/providers/yugabyte/yba/latest) generally available. Use HashiCorp Terraform to automate provisioning, lifecycle, and other workflows to reduce costs and time.
Benefits: Increased productivity, predictability, and control.

- YugabyteDB Anywhere is now supported on SUSE Linux Enterprise Server (SLES) 15 SP4

- YugabyteDB Anywhere now deploys a new [node agent]() service on every node and proxies all communication to database processes via this service.
Benefits: YugabyteDB Anywhere no longer requires SSH and SCP except for initial provisioning and node debugging.

- GCP universes can now be created based on user-provided, nearly fully customizable [instance templates](https://cloud.google.com/compute/docs/instance-templates).
Benefits: Several customizations are possible such as GCP encrypted memory and disk, TPM, solo tenancy, and so on.

- For self-signed certificates generated by YugabyteDB Anywhere, the "organization name" can now be specified explicitly via global runtime configuration setting.

## YBA

## New features

* [PLAT-7875] Add histogram of latencies to slow queries
* [PLAT-8814] [UI] Selective table restore from YCQL backup
* [PLAT-9215] [PLAT-9216] [PLAT-9217] [PLAT-9394] Implementation of Node Agent Phase 1 and Phase 2
* [PLAT-9034] Support custom organization in for self-signed certificates
* [PLAT-9832] Add optional tag to instance template field
* [PLAT-9808] Add table by table backup support in New Restore Modal
* [PLAT-9606] Mechanism to retrieve OIDC token when OIDC is enabled and setup
* [PLAT-9720] Copy certificate from runtime config to YBA's trust store
* [PLAT-9547] Pass imageBundle in provider edit payloads
* [PLAT-9219] [PLAT-6720] Add support for editing GCP instance templates and expose the field on YBA UI
* [PLAT-7876] [PLAT-9456] Add query latency graph to side info panel for slow queries
* [PLAT-9658] Add allTables true for full backup types
* [PLAT-9140] Support more filters for UI and include universe and provider names with UUIDs in the node agent page API
* [PLAT-7363] [PLAT-8554] Adds Image Bundle Support in YBA
* [PLAT-9500] [yugabyte] Added YB controller port (#170) (#172)
* [PLAT-8122] Enable node-agent phase 2 for all new providers by default for non YBM
* [PLAT-9409] [yba] Added resources to initContainers
* [PLAT-9311] Indicate xCluster replication type on xCluster config card and details page
* [PLAT-8704] Add data-testid to onPrem 'add zone' button
* [PLAT-3556] [PLAT-9460] LDAP integration with custom CA truststore
* [PLAT-6000] [PLAT-7166] [PLAT-7167] [PLAT-7170] [PLAT-9345] Custom CA store in YBA - CRUD

## Improvements

* [PLAT-8037] Add ability to scrape nodes from external K8s clusters
* [PLAT-7837] [PLAT-8353] Adds AZ name/code validation for onprem provider, Change the usage for skipKeyPairValidate flag to accessKey property.
* [PLAT-9903] Update on-prem instance management text for node agent
* [PLAT-9408] Manage tags and skip_tags with Ansible script better
* [PLAT-9839] Remove non-null check for "namespace_name" field of success marker file
* [PLAT-9558] Update Imagebundles in case AMI is modified via region
* [PLAT-9385] Propagate --cluster_uuid gflag to all masters/tservers from YBA during master/tserver startup
* [PLAT-8037] Changes for scraping external Kubernetes clusters
* [PLAT-8706] Make download release files synchronous to add release task
* [PLAT-9819] Must turn off LDAPs enforce cert verification on upgrades if configured
* [PLAT-9640] Updating cryptography package
* [PLAT-9643] Update guava version
* [PLAT-9820] Add resources and limit to test pod created by helm for yugaware chart.
* [PLAT-9787] Changed raw -> command in ansible install-s3cmd.yml playbook
* [PLAT-9691] [PLAT-7168] Custom hostname verification for hosts like s3.amazonaws.com
* [PLAT-9642] Remove the dependency for net.minidev package
* [PLAT-9659] [PLAT-5902] Enhancements to validation around HBA Conf LDAP attributes
* [PLAT-9641] Updating the version of akka-actor
* [PLAT-9477] Improvements to Performance Advisor UI
* [PLAT-9609] [LDAP] Handle migration of LDAP Service Account config during upgrades
* [PLAT-9513] Make timeout for YSQL and slow queries runtime config
* [PLAT-9615] Add changes for ybc upgrade for db versions having multiple packages
* [PLAT-9389] [UI] Custom CA store UI changes
* [PLAT-9353] Optimize find command in yb_backup.py
* [PLAT-9350] Clean checksum files for backup and checksum/checksum-downloaded files for restore
* [PLAT-9788] Increase COMMAND_EXECUTION_TIMEOUT_SEC for node agent
* [PLAT-9402] [PITR] [UI] Make PITR task parameters in milliseconds granularity
* [PLAT-9534] Remove thirdparty-deps references from values.yaml since this isn't used
* [PLAT-7956] Added default true runtime flag for YBC to "listen on all interfaces" i.e. bind to 0.0.0.0
* [PLAT-9200] Backup deletion improvements
* [PLAT-9213] [PLAT-9237] Edit Provider Improvements.
* [PLAT-9268] UI - Default LDAP Role radio button and ConnectOnly dropdowns
* [PLAT-9269] ConnectOnly Role and Default LDAP role
* [PLAT-9433] Disable rolling upgrade for TLS configuration
* [PLAT-9144] Add UI validation for duplicate region on legacy provider form
* [PLAT-8995] Add affected nodes info to alerts as label + alert message, where needed + allow adding it to custom notification templates
* [PLAT-9231] Better debug logs for LDAP Group Mapping
* [PLAT-9400] Add xCluster role to YBA UI
* [PLAT-9263] Optimise slow queries
* [PLAT-8232] Handle new RPC queue type in metrics dashboard
* [PLAT-8781] Update logic check for on-prem node reboots
* [PLAT-9324] Add retry for check memory test during software upgrade
* [PLAT-9305] Make YBC work with secondary + primary private IP settings
* [PLAT-9366] [PLAT-7274] Use task framework to do all edit provider work
* [PLAT-9326] Snapshot Cleanup cleans In-Progress YBC backup's snapshot due to race condition
* [PLAT-9410] AWS KMS should use KeyManager to create service instance
* [PLAT-7281] All ws clients to start using YBA's custom CA trust-store

## Bug fixes

* [PLAT-9605] Fix K8 custom resources implementation on UI
* [PLAT-9636] Update protobuf to fix cves
* [PLAT-9739] [New Restore Modal Fixes] Changing Keyspace after table selection takes all keyspace backup
* [PLAT-9722] [UI] Modify file upload message on the CA trust store
* [PLAT-9663] Fix standby prometheus config to point to the remove YBA instance
* [PLAT-9617] Kubernetes Provider Creation fix for multi-region setup.
* [PLAT-9143] Fix read replica removal in case hosted zone config is used.
* [PLAT-9404] [PITR] Use DB ids instead of DB names to create PITR configs
* [PLAT-9140] Fix for Support more filters for UI and include universe and provider names with UUIDs in the node agent page API
* [PLAT-9562] Fix metrics collection after universe resume
* [PLAT-9319] fix : Restrict Seperate flags for Read Replica for k8s
* [PLAT-9524] [PLAT-9536] Fix YBDB verison check for latency histogram and return 'rolname' field in slow queries response
* [PLAT-9506] Fix k8s region metadata query key
* [PLAT-9822] [UI] Admin page fails to load on 2.18 branch
* [PLAT-9649] [xCluster] Fix sync xcluster on remove table from yb-admin
* [PLAT-9609] [PLAT-9709] Fix migration package name and path
* [PLAT-9781] Universe API returns wrong EAR disabled state
* [PLAT-9480] Show error about CA certificates upload on LDAP TLS connect error
* [PLAT-9447] Specify container name in node_client_utils
* [PLAT-9761] [PLAT-6180] provider value is not rendered properly, Show YB DB version in Universe tile and universe list
* [PLAT-8826] Fix next scheduled incremental backup task time.
* [PLAT-9501] Return 401 on invalid credentials and ConnectOnly features json
* [PLAT-9893] On disabling EAR, the kmsConfigUUID is not set
* [PLAT-9904] Node agent token is exposed in the log on error
* [PLAT-9733] Don't fail scheduled full/incremental backups if one/few tables are deleted from the selected table list
* [PLAT-9620] EditUniverse retries after failures can cause unpredictable behavior.
* [PLAT-9733] [Platform] Incremental Backup is not allowed with selective restored tabled in same keyspace
* [PLAT-9796] [Platform] Display err msg and link to CA cert store when LDAP connection fails due to CA cert Error.
* [PLAT-9434] Disable rolling upgrade option to toggle TLS in the API
* [PLAT-9817] Onprem instances added using node-agent CLI has zone name appear as UUID on the UI
* [PLAT-9180] [Platform] [Azure] Add new tags is not working on azure universe
* [PLAT-9363] [UI] PITR should allow seconds while performing restore
* [PLAT-9432] (Fix 1) File upload via node agent gRPC endpoint is slow over network with high latency
* [PLAT-9877] Wait for node-agent to come up after the automatic reboot on retry of node tasks
* [PLAT-9480] [Platform] [UI] Show error message with hyperlink to "CA certificates" page when YBA cannot talk to external servers
* [PLAT-9395] Up-version sbt to 1.8.3 to get rid of incremental compile issue workaround
* [PLAT-9372] Node agent upgrade failure in the 2nd and subsequent attempt
* [PLAT-9103] [2.18] KMS name is missing on backup details tab
* [PLAT-8928] Workaround for systemd user ulimits
* [Platform] Newer table UUID is passed during Incremental backup
* [PLAT-9709] [PLAT-3556] Enforce cert verification with secure LDAP with backward compatibility.
* [PLAT-9670] Expose region name for k8s & on-prem provider form
* [PLAT-7591] Clean azcopy files after backup
* [PLAT-9628] Make isTransactionalConfig a controlled checkbox
* [PLAT-9666] Provide cert node filename for K8s YBC
* [PLAT-9602] EAR state should be set to previous/valid state in case of failure
* [PLAT-9650] [2.19.1.0-b286] After authentication, UI redirects user back to login page again
* [PLAT-9523] Add constraint on filePath to be unique
* [PLAT-9403] [PITR] Snapshot restore task should wait until the restore is finished
* [PLAT-9583] [UI] Latest incremental backup is not sent incase of 'Restore Entire Backup'
* [PLAT-7168] S3 client integraton with CA-store to validate server certs
* [PLAT-9520] WaitForConnection subtask should use yugabyte user for node-agent connection
* [PLAT-8689] Add UI option for skipping keypair validation when configuring AWS provider
* [PLAT-9391] Allow connectonly user to get their own customer and feature file for connectonly user
* [PLAT-9548] [xCluster] Add a sleep time before restore subtask during xCluster setup
* [PLAT-9528] Add runtime flag "use_server_broadcast_address_for_yb_backup"
* [PLAT-9390] Proper combination of role to LDAP group mapping with earlier LDAP role managementbehaviour
* [PLAT-8502] [PLAT-9310] [PLAT-9506] Fetch region metadata from backend
* [PLAT-8762] Add sync replication UI
* [PLAT-9525] [PLAT-9526] [UI] [SSO] [Configure OIDC Provider Metadata] Bug fixes and improvements
* [PLAT-9322] [PLAT-9323]UI Support for ConnectOnly User
* [PLAT-9223] reconfigure failed to load state
* [PLAT-9341] Populate RPC broadcast address maps in backups regardless of checksum
* [PLAT-8782] Do not display reboot node option for on-prem universes with manually provisioned nodes or provider
* [PLAT-9255] [PLAT-9374] Azcopy/Node Exporter vulnerabilities
* [PLAT-4913] Hashicorp connection to use trust-store CA's as well
* [PLAT-8455] Eagerly seed active universe key in upgrade tasks
* [PLAT-9338] Remove EpollChannelOption.TCP_KEEPIDLE setting from yb-client, which was added by mistake
* [PLAT-9699] Airgap universe creation is failing due to Node agent

## Known issues

* [PLAT-9733] Incremental Backup is not allowed with selective restored tabled in same keyspace.

If one or more tables are deleted from the list of tables in a backup schedule, the backups will fail.

YBDB

## New features
## Improvements
## Bug fixes

[17884] [CDCSDK] Add checkpoint details to snapshot records and change check of copying checkpoint from colocated snapshot to streaming
[D27331] [CDCSDK] Call ResolveIntents if consistent_safe_time is stuck
[18322] [YSQL] fixÂ index ScanKey bugs
[18069] [YSQL] Update third-party dependencies & add CMake configs for JWT-CPP
[18467] [CDCSDK] Do not send safepoint records in snapshot phase
[18391] [17864] [YSQL] RPC timers in write path default to granular clocks in Linux.
[17826] [17823] [YSQL] Use a more granular clock for RPC timing on Linux builds.
[17730] [YSQL] Import Improve pruning of a default partition
[18418] [CDCSDK] Set cdc_populate_safepoint_record default to true
[16441] [YSQL] Retry CREATE DATABASE when oid collision happens
[17696] [YSQL] Add yb_latency_histogram to <server>/statements
[16665] [14308] [DocDB] fix logging of RocksDB write batches when packing is used, part II
[17961] [18008] [YSQL] Fix max connection limit errors with additional locking
[17400] [17488] [16665] [14308] [DocDB] fix crash due to speculatively decoding a slice ending in a Typeset
[18067] [YSQL] Import 'Remove arbitrary restrictions on password length.'
[17805] [17965] [YSQL] Enhance TServer PG daemon robustness
[18328] [CDCSDK] Fix bug in GetTabletIdsToPoll when only 1 child tablet has been polled
[14308] [DocDB] update flag description now that savepoints work with XCluster
[18067] [YSQL] Import "Make StringInfo available to frontend code."
[18393] [DocDB] Fix unknown int64 flags incorrectly getting tagged as runtime
[16665] [14308] [DocDB] fix logging of RocksDB write batches when packing is used, part I
[16711] [DocDB] Only display AutoFlags in UI that are relevent to the process
[18068] [YSQL] add a new tserver (preview) convenience GFlag ysql_ident_conf_csv for user name maps
[18184] [DocDB] Fix crash in case of IN handling
[17558] [DocDB] Issue with picking local_limit during paging read
[DB-6840] [xCluster] Only Throttle XCluster Traffic from Source Side
[17966] [DocDB] Unify ModifyPlacementInfo string parsing
[17867] [DocDB] Account for table placement and read replicas in underreplicated endpoint
[18227] [DocDB] Fix log reader missing max_replicate_index
[DB-2613] [YSQL] Remove unused log4j reference from the java modules.
[17683] [DocDB] Invalidate YCQL system.partitions cache on table creation
[18023] [DocDB] Log the result of chronyd when tserver crashes with a high clock skew
[18001] [DocDB] Skip key registry decryption in EncryptionManager::GetFullUniverseKeyRegistry() when EAR is disabled.
[17512] [yugabyted] Code changes to provide the master and tserver webserver port information to the API server.
[10453] test: deflake TestPgRegressHashIndex perf test
[18064] [DocDB] enhance tserver consensus state page
[18133] [CDCSDK] GetTabletListToPollForCDC should return safe_time as well
[17795] [CDCSDK] Add wal_segment_index to GetChanges Response and Request
[17997] [xCluster] IsBootstrapRequired should return False if any data exists in the WAL
[17592] [17760] [DocDB] Rename WAL file after writing the file header on the disk
[16267] [17755] [DocDB] Fix issues in RBS from closest peer codepath
[17935] [CDCSDK] Reduce the number of txns in TestCDCSDKConsistentStreamWithManyTransactions
[17969] [CDCSDK] Fix heap-use-after-free failure for TestFromOpIdInGetChangesResponse
[18116] [CDCSDK] Persist the safe_time from explicit checkpoint in cdc_state table
[16680] [CDCSDK] Fix colocated before image test with packed row
[17795] [CDCSDK] Fix response safe_time calculation in corner cases
[16508] [YSQL] Fix incorrect tablet count assignment on user tables created within geo-partitoned tablespace
[17925] [CDCSDK] Refetch correct schema in cases of schema versioning errors
[18071] [yugabyted] Changing the status display to not show the actual password when it's generated in secure mode.
[17795] [CDCSDK] Emit cdc records in order of commit time instead of op id
[17700] [YSQL] Add yb_get_percentile YSQL function
[17972] [CDCSDK] Add guards around updating invalid checkpoints during snapshot phase
[17801] [YSQL] Option to toggle distinct pushdown
[17356] [YSQL] Reduced memory_tracking overhead in high use situations from 10% to 3%
[17855] [CDCSDK] Force add snapshot bootstrap operation checkpoint to cdc_state table
[17312] [CDCSDK] Add begin/commit records for single shard txns
[17104] [DocDB] Shuts downs superblock_flush_bg_task_ on tserver shutdown
[16778] [DocDB] Background flush task when lazy superblock flush is enabled
[15060] [DocDB] Makes backoff loop aggressive in colocated table creation path
[16466] [DocDB] Flush superblock before reading in RBS with lazy superblock flush
[16604] [DocDB] Renames last_change_metadata_op_id to last_flushed_change_metadata_op_id in superblock
[6597] [DocDB] fixed PartitionSchema::CreateHashPartitions to provide even hash codes distribution
[16116] [DocDB] Lazily flush superblock on colocated table creation
[17718] [xCluster] Check table leader term in XCluster Poller
[17981] [yugabyted] yugabyted start should work when custom `certs_dir` is provided.
[17225] [YSQL] Use consistent read snapshot in DEFERRABLE READ ONLY mode
[13395] [YSQL] Return error for unset bind PK value
[17868] [DocDB] Export histogram quantile p50/95/99 as gauge to Prometheus #TYPE
[14762] [DocDB] Prevent crashing the master if trying to restore a deleted table
[17663] [DocDB] Clear drive load / leader load maps before appending to them
[17887] [DST] PITR restores should ignore Deleted namespaces
[17608] [DocDB] Add HTTP security headers
[17890] [xCluster] create intent iterator outside of RegularDB batch writer to avoid deadlock
[17869] [YSQL] fix incorrect optimization on NULL scans
[17574] [DocDB] Add EncryptedWritableFile::Size() to fix incorrect WAL footer start offset
[17351] [yugabyted] Small Bug Fix
[17038] [DocDB] Async open table while updating indexes
[17648] [YSQL] Unexpected SELECT DISTINCT behaviour with non index conditions
[16912] [DocDB] Expose GetOldTransactions RPC to fetch long-running transaction metadata
[17290] [DocDB] Fix race condition in deadlock_detector causing invalid probe_num