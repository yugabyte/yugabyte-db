Parsed test spec with 2 sessions

starting permutation: s1 at1 sc1 s2 at2 sc2 rx1 wx rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 sc1 s2 at2 rx1 sc2 wx rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc2: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 sc1 s2 at2 rx1 wx sc2 rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 sc1 s2 at2 rx1 wx rx3 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 sc1 s2 at2 rx1 wx rx3 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 s2 rx1 at2 sc2 wx rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 sc1 s2 rx1 at2 wx sc2 rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 sc1 s2 rx1 at2 wx rx3 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 sc1 s2 rx1 at2 wx rx3 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 s2 rx1 wx at2 sc2 rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 sc1 s2 rx1 wx at2 rx3 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 sc1 s2 rx1 wx at2 rx3 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 s2 rx1 wx rx3 at2 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 sc1 s2 rx1 wx rx3 at2 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 s2 rx1 wx rx3 c2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 rx1 s2 at2 sc2 wx rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 sc1 rx1 s2 at2 wx sc2 rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 sc1 rx1 s2 at2 wx rx3 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 sc1 rx1 s2 at2 wx rx3 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 rx1 s2 wx at2 sc2 rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 sc1 rx1 s2 wx at2 rx3 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 sc1 rx1 s2 wx at2 rx3 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 rx1 s2 wx rx3 at2 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 sc1 rx1 s2 wx rx3 at2 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 rx1 s2 wx rx3 c2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 rx1 wx s2 at2 sc2 rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 sc1 rx1 wx s2 at2 rx3 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 sc1 rx1 wx s2 at2 rx3 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 rx1 wx s2 rx3 at2 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 sc1 rx1 wx s2 rx3 at2 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 rx1 wx s2 rx3 c2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 rx1 wx rx3 s2 at2 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 sc1 rx1 wx rx3 s2 at2 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 rx1 wx rx3 s2 c2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 sc1 rx1 wx rx3 c2 s2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 sc1 s2 at2 sc2 wx rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 rx1 sc1 s2 at2 wx sc2 rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 rx1 sc1 s2 at2 wx rx3 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 rx1 sc1 s2 at2 wx rx3 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 sc1 s2 wx at2 sc2 rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 rx1 sc1 s2 wx at2 rx3 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 rx1 sc1 s2 wx at2 rx3 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 sc1 s2 wx rx3 at2 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 rx1 sc1 s2 wx rx3 at2 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 sc1 s2 wx rx3 c2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 sc1 wx s2 at2 sc2 rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 rx1 sc1 wx s2 at2 rx3 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 rx1 sc1 wx s2 at2 rx3 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 sc1 wx s2 rx3 at2 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 rx1 sc1 wx s2 rx3 at2 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 sc1 wx s2 rx3 c2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 sc1 wx rx3 s2 at2 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 rx1 sc1 wx rx3 s2 at2 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 sc1 wx rx3 s2 c2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 sc1 wx rx3 c2 s2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 wx sc1 s2 at2 sc2 rx3 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 at1 rx1 wx sc1 s2 at2 rx3 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 rx1 wx sc1 s2 at2 rx3 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 wx sc1 s2 rx3 at2 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 rx1 wx sc1 s2 rx3 at2 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 wx sc1 s2 rx3 c2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 wx sc1 rx3 s2 at2 sc2 c2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 at1 rx1 wx sc1 rx3 s2 at2 c2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 wx sc1 rx3 s2 c2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 at1 rx1 wx sc1 rx3 c2 s2 at2 sc2
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 sc1 s2 at2 sc2 wx rx3 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 rx1 at1 sc1 s2 at2 wx sc2 rx3 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 rx1 at1 sc1 s2 at2 wx rx3 sc2 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 rx1 at1 sc1 s2 at2 wx rx3 c2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 sc1 s2 wx at2 sc2 rx3 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 rx1 at1 sc1 s2 wx at2 rx3 sc2 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 rx1 at1 sc1 s2 wx at2 rx3 c2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 sc1 s2 wx rx3 at2 sc2 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 rx1 at1 sc1 s2 wx rx3 at2 c2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 sc1 s2 wx rx3 c2 at2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 sc1 wx s2 at2 sc2 rx3 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 rx1 at1 sc1 wx s2 at2 rx3 sc2 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 rx1 at1 sc1 wx s2 at2 rx3 c2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 sc1 wx s2 rx3 at2 sc2 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 rx1 at1 sc1 wx s2 rx3 at2 c2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 sc1 wx s2 rx3 c2 at2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 sc1 wx rx3 s2 at2 sc2 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 rx1 at1 sc1 wx rx3 s2 at2 c2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 sc1 wx rx3 s2 c2 at2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 sc1 wx rx3 c2 s2 at2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 wx sc1 s2 at2 sc2 rx3 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: s1 rx1 at1 wx sc1 s2 at2 rx3 sc2 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 rx1 at1 wx sc1 s2 at2 rx3 c2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 wx sc1 s2 rx3 at2 sc2 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 rx1 at1 wx sc1 s2 rx3 at2 c2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 wx sc1 s2 rx3 c2 at2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 wx sc1 rx3 s2 at2 sc2 c2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: s1 rx1 at1 wx sc1 rx3 s2 at2 c2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 wx sc1 rx3 s2 c2 at2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 rx1 at1 wx sc1 rx3 c2 s2 at2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 rx1 wx at1 rx3 c2 sc1 s2 at2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID; <waiting ...>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at1: <... completed>
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 rx1 wx rx3 at1 c2 sc1 s2 at2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID; <waiting ...>
step c2: COMMIT;
step at1: <... completed>
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: s1 rx1 wx rx3 c2 at1 sc1 s2 at2 sc2
step s1: BEGIN;
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 sc1 s2 at2 sc2 wx rx3 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: rx1 s1 at1 sc1 s2 at2 wx sc2 rx3 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: rx1 s1 at1 sc1 s2 at2 wx rx3 sc2 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: rx1 s1 at1 sc1 s2 at2 wx rx3 c2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 sc1 s2 wx at2 sc2 rx3 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: rx1 s1 at1 sc1 s2 wx at2 rx3 sc2 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: rx1 s1 at1 sc1 s2 wx at2 rx3 c2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 sc1 s2 wx rx3 at2 sc2 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: rx1 s1 at1 sc1 s2 wx rx3 at2 c2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 sc1 s2 wx rx3 c2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 sc1 wx s2 at2 sc2 rx3 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: rx1 s1 at1 sc1 wx s2 at2 rx3 sc2 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: rx1 s1 at1 sc1 wx s2 at2 rx3 c2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 sc1 wx s2 rx3 at2 sc2 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: rx1 s1 at1 sc1 wx s2 rx3 at2 c2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 sc1 wx s2 rx3 c2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 sc1 wx rx3 s2 at2 sc2 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: rx1 s1 at1 sc1 wx rx3 s2 at2 c2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 sc1 wx rx3 s2 c2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 sc1 wx rx3 c2 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 wx sc1 s2 at2 sc2 rx3 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;

starting permutation: rx1 s1 at1 wx sc1 s2 at2 rx3 sc2 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step sc2: COMMIT;
step c2: COMMIT;

starting permutation: rx1 s1 at1 wx sc1 s2 at2 rx3 c2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 wx sc1 s2 rx3 at2 sc2 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: rx1 s1 at1 wx sc1 s2 rx3 at2 c2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 wx sc1 s2 rx3 c2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step s2: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 wx sc1 rx3 s2 at2 sc2 c2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
step c2: COMMIT;

starting permutation: rx1 s1 at1 wx sc1 rx3 s2 at2 c2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step c2: COMMIT;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 wx sc1 rx3 s2 c2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s2: BEGIN;
step c2: COMMIT;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 s1 at1 wx sc1 rx3 c2 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step wx: INSERT INTO b VALUES (0); <waiting ...>
step sc1: COMMIT;
step wx: <... completed>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 s1 wx at1 rx3 c2 sc1 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step wx: INSERT INTO b VALUES (0);
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID; <waiting ...>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at1: <... completed>
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 s1 wx rx3 at1 c2 sc1 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID; <waiting ...>
step c2: COMMIT;
step at1: <... completed>
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 s1 wx rx3 c2 at1 sc1 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step s1: BEGIN;
step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 wx s1 at1 rx3 c2 sc1 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID; <waiting ...>
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at1: <... completed>
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 wx s1 rx3 at1 c2 sc1 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step s1: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID; <waiting ...>
step c2: COMMIT;
step at1: <... completed>
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 wx s1 rx3 c2 at1 sc1 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step s1: BEGIN;
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 wx rx3 s1 at1 c2 sc1 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID; <waiting ...>
step c2: COMMIT;
step at1: <... completed>
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 wx rx3 s1 c2 at1 sc1 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step s1: BEGIN;
step c2: COMMIT;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;

starting permutation: rx1 wx rx3 c2 s1 at1 sc1 s2 at2 sc2
step rx1: SELECT * FROM b WHERE a_id = 1 LIMIT 1;
a_id
----
   1
(1 row)

step wx: INSERT INTO b VALUES (0);
step rx3: SELECT * FROM b WHERE a_id = 3 LIMIT 3;
a_id
----
   3
   3
   3
(3 rows)

step c2: COMMIT;
step s1: BEGIN;
step at1: ALTER TABLE b ADD CONSTRAINT bfk FOREIGN KEY (a_id) REFERENCES a (i) NOT VALID;
step sc1: COMMIT;
step s2: BEGIN;
step at2: ALTER TABLE b VALIDATE CONSTRAINT bfk;
step sc2: COMMIT;
