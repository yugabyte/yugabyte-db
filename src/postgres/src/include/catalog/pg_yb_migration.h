/*-------------------------------------------------------------------------
 *
 * pg_yb_migration.h
 *	  definition of the "YSQL migration history" system catalog (pg_yb_migration)
 *
 * Tracks a history of all applied migrations, starting with <baseline>
 * assigned by reinitdb.
 *
 * Portions Copyright (c) YugaByte, Inc.
 *
 * src/include/catalog/pg_yb_migration.h
 *
 * NOTES
 *	  The Catalog.pm module reads this file and derives schema
 *	  information.
 *
 *-------------------------------------------------------------------------
 */
#ifndef PG_YB_MIGRATION_H
#define PG_YB_MIGRATION_H

#include "catalog/genbki.h"

#include "catalog/pg_yb_migration_d.h"

/* ----------------
 *		pg_yb_migration definition.  cpp turns this into
 *		typedef struct FormData_pg_yb_migration
 * ----------------
 */
CATALOG(pg_yb_migration,8027,YBMigrationRelationId) BKI_ROWTYPE_OID(8028,YBMigrationRelation_Rowtype_Id) BKI_SCHEMA_MACRO
{
	/* Major version of the applied migration. */
	int32		major;

	/*
	 * Used when backporting catalog changes to avoid conflicts on major
	 * versions.
	 */
	int32		minor;

	/* Name of the migration, or "<baseline>" if it was generated by initdb. */
	NameData	name;

	/*
	 * Timestamp (in millis) of the migration application date, NULL for
	 * baseline.
	 */
	int64		time_applied BKI_FORCE_NULL BKI_DEFAULT(_null_);
} FormData_pg_yb_migration;

/* ----------------
 *		Form_pg_yb_migration corresponds to a pointer to a tuple with
 *		the format of pg_yb_migration relation.
 * ----------------
 */
typedef FormData_pg_yb_migration *Form_pg_yb_migration;

#endif							/* PG_YB_MIGRATION_H */
